# Software Requirements - Models Module
## py-armodel2 - AUTOSAR ARXML Processing Library

**Module**: `armodel.models.M2`
**Version**: 1.0
**Date**: 2026-02-15

---

## 1. Module Overview

The `armodel.models.M2` module contains generated AUTOSAR model classes representing AUTOSAR M2 metamodel definitions.

### 1.1 Purpose
- Provide Python classes for all AUTOSAR type definitions
- Support serialization and deserialization
- Enable programmatic creation of AUTOSAR objects

### 1.2 Components
- 1,912 generated Python class files
- AUTOSARTemplates: AUTOSAR standard classes
- MSR: Measurement, Systems, Requirements classes

### 1.3 Code Generation
All model classes are automatically generated by `tools/generate_models.py` from type definitions.

---

## 2. Functional Requirements

### SWR_MODELS_001: AUTOSAR Model Classes
**Description**: The system shall provide Python classes representing all AUTOSAR model elements defined in the M2 metamodel.

**Priority**: P0 (Critical)

**Total Classes**: 1,912

**Key Classes**:
- `AUTOSAR`: Root element
- `ARPackage`: Package container
- `CompuMethod`: Computation method
- `SwBaseType`: Base type definition
- `DataConstr`: Data constraint
- `ImplementationDataType`: Implementation data type

---

### SWR_MODELS_002: Class Hierarchy
**Description**: All model classes shall inherit from ARObject base class following AUTOSAR inheritance hierarchy.

**Priority**: P0 (Critical)

**Required Hierarchy**:
```
ARObject
├── Referrable (short_name property)
│   ├── Identifiable (identifier properties)
│   │   ├── Describable (description properties)
│   │   └── ARElement (AUTOSAR-specific)
│   └── PackageableElement
│       └── ARPackage
```

---

### SWR_MODELS_003: Serialize Method
**Description**: All model classes shall provide a serialize() method that converts the object to xml.etree.ElementTree.Element.

**Priority**: P0 (Critical)

**Method Signature**: `def serialize(self) -> ET.Element`

---

### SWR_MODELS_004: Deserialize Method
**Description**: All model classes shall provide a deserialize() classmethod that creates an object from an XML element.

**Priority**: P0 (Critical)

**Method Signature**: `@classmethod def deserialize(cls, element: ET.Element) -> Self`

---

### SWR_MODELS_005: Builder Pattern
**Description**: All model classes shall include a Builder class for fluent object construction.

**Priority**: P1 (High)

**Required Pattern**:
```python
obj = (ClassNameBuilder()
       .with_attribute(value)
       .with_other_attribute(value2)
       .build())
```

---

### SWR_MODELS_006: Type Hints
**Description**: All model class attributes shall have complete type hints.

**Priority**: P0 (Critical)

---

### SWR_MODELS_007: Docstrings
**Description**: All model classes and methods shall have comprehensive docstrings.

**Priority**: P1 (High)

**Standard**: Google style docstrings

---

### SWR_MODELS_008: Package Structure
**Description**: Generated classes shall follow AUTOSAR package structure in `src/armodel2/models/M2/`.

**Priority**: P0 (Critical)

**Required Structure**:
```
src/armodel2/models/M2/
├── AUTOSARTemplates/
│   ├── autosar.py
│   ├── AbstractPlatform/
│   ├── AdaptivePlatform/
│   └── ...
└── MSR/
    ├── AsamHdo/
    └── ...
```

---

### SWR_MODELS_009: Attribute Validation
**Description**: Builder classes shall validate required attributes in the build() method.

**Priority**: P1 (High)

**Required Behavior**:
- Raise ValueError if required attributes missing
- Raise ValueError if attribute values invalid

---

### SWR_MODELS_010: Namespace Handling
**Description**: Serialize methods shall properly handle XML namespaces for AUTOSAR elements.

**Priority**: P0 (Critical)

---

## 3. Data Requirements

### 3.1 Model Class Structure

Each generated class must include:
1. Class definition inheriting from appropriate base
2. Type-hinted attributes
3. serialize() method
4. deserialize() classmethod
5. Builder class
6. Docstrings

### 3.2 Key Model Classes

| Class | Description | Package |
|-------|-------------|---------|
| AUTOSAR | Root element | AUTOSARTemplates |
| ARPackage | Package container | GenericStructure/GeneralTemplateClasses |
| CompuMethod | Computation method | MSR/AsamHdo |
| SwBaseType | Base type | MSR/AsamHdo/BaseTypes |
| DataConstr | Data constraint | MSR/AsamHdo |
| ImplementationDataType | Implementation data type | MSR/DataDictionary |

---

## 4. Interface Requirements

### 4.1 Base Class: ARObject

**Location**: `src/armodel2/models/M2/AUTOSARTemplates/GenericStructure/GeneralTemplateClasses/ar_object.py`

**Required Methods**:
- `serialize() -> ET.Element`
- `deserialize(cls, element: ET.Element) -> Self`

---

## 5. Non-Functional Requirements

### SWR_MODELS_NFR_001: Code Generation
**Description**: All model classes shall be generated automatically, not manually written.

**Priority**: P0 (Critical)

**Tool**: `tools/generate_models.py`

---

### SWR_MODELS_NFR_002: Code Standards
**Description**: Generated code shall comply with all design rules in `docs/designs/design_rules.md`.

**Priority**: P0 (Critical)

---

### SWR_MODELS_NFR_003: Regenerability
**Description**: Model classes shall be regeneratable at any time without manual intervention.

**Priority**: P1 (High)

---

## 6. Dependencies

### 6.1 Internal Dependencies
- `armodel.core`: For schema version management
- `xml.etree.ElementTree`: For serialization

### 6.2 External Dependencies
- `xml.etree.ElementTree`: XML serialization (standard library)
- `typing`: Type hints (standard library)

---

## 7. Requirements Summary

| Category | Total Requirements |
|----------|-------------------|
| Functional | 10 |
| Non-Functional | 3 |
| **Total** | **13** |

---

**Document History**:
| Version | Date | Author | Changes |
|---------|------|--------|---------|
| 1.0 | 2026-02-15 | AI Assistant | Initial version |
| 1.1 | 2026-02-15 | AI Assistant | Removed verification methods and code |
